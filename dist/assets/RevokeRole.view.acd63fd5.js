import{u as N,r as m,b as v,j as l,ad as h,n as p}from"./index.02d7c6f9.js";import{u as G,a as b}from"./useRoles.52daa2a6.js";import{u as A}from"./useUsers.609874be.js";import{G as O}from"./GrantForm.09a798fa.js";import"./isAuthenticated.9fb6dc16.js";import"./index.d0d82724.js";import"./StopOutlined.b94033b4.js";function S(){var u;N("Revoga\xE7\xE3o de Roles");const[d,f]=m.exports.useState(!1),{fetchRolesAllNotOrGranted:r,rolesNotOrGranted:t}=G(),{allUsersSummary:a,fetchUsersSummary:n}=A(),{revokingRoles:i}=b(),E=v();if(m.exports.useEffect(()=>{n().catch(e=>{var s;if(((s=e==null?void 0:e.data)==null?void 0:s.status)===403){f(!0);return}throw e})},[n,r,i]),d)return l(h,{children:"Voc\xEA n\xE3o tem permiss\xE3o para executar essa opera\xE7\xE3o!"});const x=function(e){r(e,"granted")},c=[];(u=t==null?void 0:t._embedded)==null||u.roles.map(e=>c.push({label:e.name.toUpperCase(),value:e.id}));function R(){var s;const e=[];return(s=a==null?void 0:a._embedded)==null||s.users.map(o=>{e.push({label:o.name,value:o.id})}),e}async function g(e,s,o){if(isNaN(Number(e))||isNaN(Number(s)))return p.error({message:"Informe o usu\xE1rio ou a role para a revoga\xE7\xE3o"});await i(e,s).then(P=>{p.success({message:"Sucesso",description:`Role ${o} revogada com sucesso`}),E("/perfis-de-acesso")})}return l(O,{title:"Revoga\xE7\xE3o de Roles",isNotGranted:!1,optionsAllNotOrGranted:c,optionsRoleOrUser:R(),onPermissionsNotOrGranted:x,onGrantingPermissions:g,profile:"REVOKE_ROLE"})}export{S as default};
