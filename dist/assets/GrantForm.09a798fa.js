import{r as o,j as r,M as L,N as O,b as k,a as A,e as P,bJ as b,ao as y,c as f,R as z,C as v,S as F,B as w,am as M}from"./index.02d7c6f9.js";import{h as V}from"./isAuthenticated.9fb6dc16.js";import{F as c}from"./index.d0d82724.js";import{S as I}from"./StopOutlined.b94033b4.js";var p={icon:function(a,n){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304z",fill:a}},{tag:"path",attrs:{d:"M232 840h560V536H232v304zm280-226a48.01 48.01 0 0128 87v53c0 4.4-3.6 8-8 8h-40c-4.4 0-8-3.6-8-8v-53a48.01 48.01 0 0128-87z",fill:n}},{tag:"path",attrs:{d:"M484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z",fill:a}}]}},name:"lock",theme:"twotone"};const _=p;var E=function(a,n){return r(L,{...O(O({},a),{},{ref:n,icon:_})})};E.displayName="LockTwoTone";const j=o.exports.forwardRef(E);function K(t){const[a]=c.useForm();k();const[n,N]=o.exports.useState(""),[d,T]=o.exports.useState(),[u,C]=o.exports.useState(),[g,S]=o.exports.useState(),{userAuth:G}=A(),h=o.exports.useMemo(()=>u,[{...u}]),l=o.exports.useMemo(()=>d,[{...d}]),{xs:m}=P(),R=o.exports.useCallback((s,e)=>t.profile.includes("REVOKE_ROLE")||t.profile.includes("GRANT_ROLE")?s:t.profile.includes("REVOKE_PERMISSIONS")||t.profile.includes("GRANT_PERMISSIONS")?e:"",[]),x={permission:r(b,{loading:g,size:"large",style:{width:"100%"},onChange:(s,e)=>{T({...d,id:s,description:e==null?void 0:e.label})},optionFilterProp:"children",filterOption:(s,e)=>{var i;return((i=e==null?void 0:e.label)!=null?i:"").toLowerCase().includes(s.toLowerCase())},options:t.optionsAllNotOrGranted})};return r(y,{title:t.title,children:f(c,{form:a,layout:"vertical",disabled:!V("EDIT_SECTORS",G),children:[f(z,{gutter:30,children:[r(v,{xs:24,lg:8,children:r(c.Item,{label:R("Selecione um usu\xE1rio","Selecione um Role"),name:"role",rules:[{required:!1,message:"o campo \xE9 obrigat\xF3rio"}],children:r(b,{style:{width:"100%"},onChange:(s,e)=>{t.optionsAllNotOrGranted&&t.onPermissionsNotOrGranted(s),C({...u,id:s,name:e==null?void 0:e.label}),N("permission")},size:"large",showSearch:!0,placeholder:"Selecione o Perfil de Acesso",optionFilterProp:"children",filterOption:(s,e)=>{var i;return((i=e==null?void 0:e.label)!=null?i:"").toLowerCase().includes(s.toLowerCase())},options:t.optionsRoleOrUser})})}),r(v,{xs:24,lg:16,children:x[n]&&r(c.Item,{label:R("Selecione um role","Selecione uma permiss\xE3o"),name:"grant",children:x[n]})})]}),f(F,{direction:m?"vertical":"horizontal",style:{width:"100%"},children:[r(w,{block:!!m,loading:g,type:"primary",onClick:()=>(S(!0),t.optionsAllNotOrGranted&&t.optionsRoleOrUser&&a.setFieldValue("grant",""),t.onGrantingPermissions&&t.onGrantingPermissions(Number(h==null?void 0:h.id),Number(l==null?void 0:l.id),l==null?void 0:l.description).finally(()=>{S(!1)})),icon:r(j,{}),children:t.isNotGranted?"CONCEDER":"REVOGAR"}),r(M,{to:"/perfis-de-acesso",children:r(w,{block:!!m,type:"primary",danger:!0,icon:r(I,{}),children:"CANCELAR"})})]})]})})}export{K as G};
