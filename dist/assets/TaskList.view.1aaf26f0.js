import{ai as G,r as l,cW as ce,cX as ae,cY as de,at as _,cZ as ie,b as pe,a as ue,e as he,j as r,ad as fe,c as p,P as De,R as O,C,S as A,al as Ae,B as d,bJ as xe,an as ve,ao as ye,I as Z,ap as Ee,aq as f,bK as a,cp as S,T as u,E as q,ar as K,n as W,as as J,c_ as I,am as U,bg as X,bM as Ce,u as Se}from"./index.02d7c6f9.js";import{D as P,l as z}from"./pt_BR.91dd4312.js";import{h}from"./moment.9709ab41.js";import{F as w}from"./index.d0d82724.js";import{f as b}from"./index.d7c688b0.js";function Ie(){const t=G(),i=l.exports.useCallback(async c=>await t(ce(c)).unwrap(),[t]),D=l.exports.useCallback(async(c,x)=>await t(ae({completed:c,assignmentId:x})).unwrap(),[t]),v=l.exports.useCallback(async(c,x)=>await t(de({approved:c,assignmentId:x})).unwrap(),[t]);return{removeAssignment:i,toggleComplete:D,toggleApprove:v}}function we(){const t=G(),i=_(c=>c.assignment.assignments),D=_(c=>c.assignment.fetching);return{fetchAssignments:l.exports.useCallback(async c=>t(ie(c)).unwrap(),[t]),assignments:i,fetching:D}}function be(){var V,B;const t=pe(),{assignments:i,fetchAssignments:D,fetching:v}=we(),[c,x]=l.exports.useState(!1),{removeAssignment:M,toggleComplete:y,toggleApprove:E}=Ie(),[F,H]=l.exports.useState(0),[Q,ke]=l.exports.useState(),[N,s]=l.exports.useState(""),[k,T]=l.exports.useState(""),[Y,m]=l.exports.useState(""),[g,ee]=l.exports.useState(""),[$,re]=l.exports.useState(""),[L,j]=l.exports.useState();ue();const{xs:R,md:Te,sm:oe,lg:Re}=he();if(w.useForm(),l.exports.useEffect(()=>{D({page:F,size:4,sort:["asc"],assignmentTitle:L,startDate:k,endDate:Y,approveDate:g,deadline:$}).catch(e=>{var o;if(((o=e==null?void 0:e.data)==null?void 0:o.status)===403){x(!0);return}}),console.log(k)},[D,F,Q,L,N,k,Y,$]),c)return r(fe,{children:"Voc\xEA n\xE3o pode visualizar esses dados!"});const te={concluded:r(P.RangePicker,{locale:z,style:{display:"flex",justifySelf:"end"},size:"large",onChange:(e,o)=>{T(h(o[0]).toISOString()),m(h(o[1]).toISOString())}}),approved:r(P.RangePicker,{locale:z,style:{display:"flex",justifySelf:"end"},size:"large",onChange:(e,o)=>{T(h(o[0]).toISOString()),ee(h(o[1]).toISOString())}}),finished:r(P.RangePicker,{locale:z,style:{display:"flex",justifySelf:"end"},size:"large",onChange:(e,o)=>{T(h(o[0]).toISOString()),re(h(o[1]).toISOString())}})},le=(e,o)=>({filterDropdown:({})=>r(w.Item,{name:"name",children:r(Z,{type:"text",placeholder:`Buscar ${o||e}`,onChange:n=>{j(n.target.value)}})}),filterIcon:n=>r(Ce,{style:{color:n?"#0099ff":void 0}})});return p(De,{children:[p(O,{justify:"space-between",gutter:20,align:"middle",children:[r(C,{xs:24,lg:5,children:p(A,{style:{width:"100%"},direction:R?"vertical":"horizontal",children:[r(Ae,{onReload:D}),r(d,{style:R||oe?{width:"100%",marginBottom:20}:{marginBottom:0},type:"primary",size:"large",onClick:()=>t("/tarefa/criar"),children:"CRIAR TAREFAS"})]})}),r(C,{xs:24,lg:19,children:r(w,{children:p(O,{justify:"space-between",gutter:30,children:[r(C,{xs:24,lg:12,children:r(w.Item,{name:"search",children:r(xe,{onChange:e=>s(e),size:"large",placeholder:"Selecione o Tipo da Pesquisa",options:[{label:"TAREFAS COM DATAS DE FINALIZA\xC7\xC3O",value:"concluded"},{label:"TAREFAS COM DATAS DE APROVA\xC7\xC3O",value:"approved"},{label:"PRAZO PARA CONCLUS\xC3O DA TAREFA",value:"finished"}]})})}),r(C,{xs:24,lg:12,children:te[N]})]})})})]}),r(ve,{}),p(ye,{title:"Lista de Tarefas",children:[R&&r(Z,{onChange:e=>j(e.target.value),placeholder:"Buscar por T\xEDtulo",type:"text",style:{width:"100%",marginBottom:30,marginTop:20}}),r(Ee,{loading:v,dataSource:(V=i==null?void 0:i._embedded)==null?void 0:V.assignments,columns:[{title:"Recursos",responsive:["xs"],render(e){var o;return r(A,{direction:"vertical",children:p(f,{column:1,size:"small",children:[r(f.Item,{label:"T\xEDtulo",children:r(O,{children:e==null?void 0:e.title})}),r(f.Item,{label:"Esta\xE7\xE3o",children:(o=e==null?void 0:e.workStation)==null?void 0:o.name}),r(f.Item,{label:"Prazo Conclus\xE3o",children:p(A,{size:"small",direction:"vertical",children:[h(e==null?void 0:e.startDate).format("DD/MM/YYYY"),h(e==null?void 0:e.deadline).format("DD/MM/YYYY")]})}),r(A,{direction:"vertical",size:"middle"}),r(f.Item,{label:"Finaliza\xE7\xE3o",children:e!=null&&e.endDate?h(e==null?void 0:e.endDate).format("DD/MM/YYYY"):r(a,{color:"green",children:"A FINALIZAR"})}),r(f.Item,{label:"Aprova\xE7\xE3o",children:e!=null&&e.approveDate?h(e==null?void 0:e.approveDate).format("DD/MM/YYYY"):r(a,{color:"green",children:"A APROVAR"})}),r(f.Item,{children:p(A,{size:"small",style:{marginBottom:15,marginTop:15},children:[r(S,{checked:e==null?void 0:e.completed,onChange:async()=>{if(e!=null&&e.completed){await y({completed:!(e!=null&&e.completed)},e.id);return}await y({completed:!(e!=null&&e.completed),endDate:new Date().toISOString()},e.id)},children:e!=null&&e.completed?r(a,{color:"blue",children:"FINALIZADA"}):r(a,{color:"red",children:"PENDENTE"})}),r(S,{checked:e==null?void 0:e.approved,onChange:async()=>{if(e!=null&&e.approved){await E({approved:!(e!=null&&e.approved)},e.id);return}await E({approved:!(e!=null&&e.approved),approveDate:new Date().toISOString()},e.id)},children:e!=null&&e.approved?r(a,{color:"blue",children:"APROVADA"}):r(a,{color:"red",children:"PENDENTE"})})]})}),p(f.Item,{label:"A\xE7\xF5es",children:[r(u,{title:"Editar",children:r(d,{type:"link",icon:r(q,{}),onClick:()=>t(`/tarefa/editar/${e.id}`)})}),r(K,{popConfirmTitle:"Remover Tarefa?",popConfirmContent:"Deseja mesmo remover esta tarefa?",onConfirm:async()=>{await M(Number(e.id)),W.success({message:"Sucesso",description:`Tarefa ${e.title}  removida com sucesso`})},children:r(u,{title:"Excluir",placement:"bottom",children:r(d,{type:"link",children:r(J,{})})})}),r(u,{title:"Atribuir Tarefa",children:r(d,{type:"link",icon:r(I,{}),onClick:()=>t(`/tarefa/${e.id}/atribuicao`)})}),r(u,{title:"Desatribuir Tarefa",children:r(d,{type:"link",icon:r(I,{}),onClick:()=>t(`/tarefa/${e.id}/desatribuicao`)})}),r(u,{title:"Ver Detalhes",children:r(U,{to:`/tarefas/${e.id}/detalhes`,children:r(d,{type:"link",icon:r(X,{})})})})]})]})})}},{title:"ID",dataIndex:"id",width:60,responsive:["sm"]},{title:"T\xEDtulo",dataIndex:"title",responsive:["sm"],...le("title","T\xEDtulo"),width:400},{title:"Prazo para Conclus\xE3o",dataIndex:"startDate",align:"center",width:350,responsive:["sm"],render(e,o){return`${b(new Date(o==null?void 0:o.startDate),"dd/MM/yyyy")}  a 
                ${b(new Date(o==null?void 0:o.deadline),"dd/MM/yyyy")}`}},{title:"Data da Finaliza\xE7\xE3o",dataIndex:"endDate",align:"center",width:60,responsive:["sm"],render(e){return e?b(new Date(e),"dd/MM/yyyy"):r(a,{color:"green",children:"A FINALIZAR"})}},{title:"Data da Aprova\xE7\xE3o",dataIndex:"approveDate",align:"center",width:60,responsive:["sm"],render(e){return e?b(new Date(e),"dd/MM/yyyy"):r(a,{color:"green",children:"A APROVAR"})}},{title:"Finaliza\xE7\xE3o",dataIndex:"completed",align:"center",responsive:["sm"],render(e,o){return r(S,{checked:o==null?void 0:o.completed,onChange:async()=>{if(o!=null&&o.completed){await y({completed:!(o!=null&&o.completed)},o.id);return}await y({completed:!(o!=null&&o.completed),endDate:new Date().toISOString()},o.id)},children:o!=null&&o.completed?r(a,{color:"blue",children:"FINALIZADA"}):r(a,{color:"red",children:"PENDENTE"})})}},{title:"Verifica\xE7\xE3o",dataIndex:"approved",align:"center",responsive:["sm"],render(e,o){return r(S,{checked:o==null?void 0:o.approved,onChange:async()=>{if(o!=null&&o.approved){await E({approved:!(o!=null&&o.approved)},o.id);return}await E({approved:!(o!=null&&o.approved),approveDate:new Date().toISOString()},o.id)},children:o!=null&&o.approved?r(a,{color:"blue",children:"APROVADA"}):r(a,{color:"red",children:"PENDENTE"})})}},{title:"A\xE7\xF5es",dataIndex:"actions",align:"center",width:200,responsive:["sm"],render:(e,o)=>p(A,{size:"small",children:[r(u,{title:"Editar",children:r(d,{type:"link",icon:r(q,{}),onClick:()=>t(`/tarefa/editar/${o.id}`)})}),r(K,{popConfirmTitle:"Remover Tarefa?",popConfirmContent:"Deseja mesmo remover esta tarefa?",onConfirm:async()=>{await M(Number(o.id)),W.success({message:"Sucesso",description:`Tarefa ${o.title}  removida com sucesso`})},children:r(u,{title:"Excluir",placement:"bottom",children:r(d,{type:"link",children:r(J,{})})})}),r(u,{title:"Atribuir Tarefa",children:r(d,{type:"link",icon:r(I,{}),onClick:()=>t(`/tarefa/${o.id}/atribuicao`)})}),r(u,{title:"Desatribuir Tarefa",children:r(d,{type:"link",icon:r(I,{}),onClick:()=>t(`/tarefa/${o.id}/desatribuicao`)})}),r(u,{title:"Ver Detalhes",children:r(U,{to:`/tarefas/${o.id}/detalhes`,children:r(d,{type:"link",icon:r(X,{})})})})]})}],pagination:{onChange:e=>H(e-1),total:(B=i==null?void 0:i.page)==null?void 0:B.totalElements,pageSize:4},rowKey:"id"})]})]})}function Fe(){return Se("Lista de Tarefas"),r(be,{})}export{Fe as default};
