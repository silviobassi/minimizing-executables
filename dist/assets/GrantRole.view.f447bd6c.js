import{u as G,r as m,b as h,j as p,ad as g,n as l}from"./index.02d7c6f9.js";import{u as A,a as b}from"./useRoles.52daa2a6.js";import{u as O}from"./useUsers.609874be.js";import{G as v}from"./GrantForm.09a798fa.js";import"./isAuthenticated.9fb6dc16.js";import"./index.d0d82724.js";import"./StopOutlined.b94033b4.js";function T(){var u;G("Concess\xE3o de Roles");const[d,f]=m.exports.useState(!1),{fetchRolesAllNotOrGranted:a,rolesNotOrGranted:t}=A(),{allUsersSummary:n,fetchUsersSummary:r}=O(),{grantingRole:i}=b(),x=h();if(m.exports.useEffect(()=>{r().catch(e=>{var s;if(((s=e==null?void 0:e.data)==null?void 0:s.status)===403){f(!0);return}throw e})},[r,a,i]),d)return p(g,{children:"Voc\xEA n\xE3o tem permiss\xE3o para executar essa opera\xE7\xE3o!"});const E=function(e){a(e,"notGranted")},c=[];(u=t==null?void 0:t._embedded)==null||u.roles.map(e=>c.push({label:e.name.toUpperCase(),value:e.id}));function N(){var s;const e=[];return(s=n==null?void 0:n._embedded)==null||s.users.map(o=>{e.push({label:o.name,value:o.id})}),e}async function R(e,s,o){if(isNaN(Number(e))||isNaN(Number(s)))return l.error({message:"Informe o usu\xE1rio ou a role para a concess\xE3o"});await i(e,s).then(P=>{l.success({message:"Sucesso",description:`Role ${o} concedida com sucesso`}),x("/perfis-de-acesso")})}return p(v,{title:"Concess\xE3o de Roles",isNotGranted:!0,optionsAllNotOrGranted:c,optionsRoleOrUser:N(),onPermissionsNotOrGranted:E,onGrantingPermissions:R,profile:"GRANT_ROLE"})}export{T as default};
