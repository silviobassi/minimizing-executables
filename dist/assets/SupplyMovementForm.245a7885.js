import{e as k,r as u,b as q,a as D,j as e,ao as L,c as i,co as j,n as B,R as b,C as o,an as w,cp as N,bJ as g,I,cq as V,E as Q}from"./index.02d7c6f9.js";import{u as U}from"./useSupplies.351759c8.js";import{u as P}from"./useUsers.609874be.js";import{u as W}from"./useWorkStations.313dde62.js";import{B as _}from"./ButtonForm.54d1a658.js";import{F as l}from"./index.d0d82724.js";import{I as J}from"./index.06ccc6ec.js";import{S as $}from"./SaveOutlined.f4c4007c.js";import{S as G}from"./StopOutlined.b94033b4.js";function te(t){var S,C,F,M,O;const[n]=l.useForm(),{lg:R}=k(),{users:d,fetchUsers:v}=P(),{workStations:m,fetchWorkStations:f}=W(),{supplies:x,fetchSupplies:E}=U(),[c,y]=u.exports.useState(!1),[A,h]=u.exports.useState(),z=q();D(),u.exports.useEffect(()=>{var s,a,r;v({}),f({}),E({}),t.supplyMovement&&(n.resetFields(),n.setFieldValue("reservedQuantity",(s=t.supplyMovement)==null?void 0:s.allocatedQuantity),((a=t.supplyMovement)==null?void 0:a.movable)!==void 0&&y((r=t.supplyMovement)==null?void 0:r.movable)),n.setFieldValue("movable",c)},[v,f,E,(S=t.supplyMovement)==null?void 0:S.allocateQuantity,(C=t.supplyMovement)==null?void 0:C.movable,c,n]);const p=u.exports.useCallback(s=>T(s),[]);function T(s){const a=[];return s==null||s.map(r=>{a.push({label:r==null?void 0:r.name,value:r==null?void 0:r.id})}),a}return e(L,{title:t.title,children:i(l,{initialValues:t.supplyMovement,layout:"vertical",form:n,onFinish:async s=>{if(h(!0),t.supplyMovement)return t.onUpdate&&t.onUpdate(s).finally(()=>{h(!1)});await j.createSupplyMovement(s).then(a=>{var r;B.success({message:"Sucesso",description:`Movimento do Recurso ${(r=a==null?void 0:a.supply)==null?void 0:r.name} criado com sucesso`}),z("/movimento-recursos")}).finally(()=>{h(!1),n.resetFields()})},children:[i(b,{justify:"space-between",gutter:50,children:[i(o,{xs:24,lg:12,children:[e(w,{orientation:"left",children:"DADOS DO MOVIMENTO"}),i(b,{justify:"space-between",gutter:30,children:[e(o,{xs:24,children:e(l.Item,{name:"movable",label:e("strong",{children:"Moviment\xE1vel?"}),style:R?{marginBottom:32}:{marginBottom:0},children:e(N,{onChange:()=>{var s;y(!c),(s=t.supplyMovement)==null||delete s.movable,console.log(c)},checked:c,children:"MOVIMENT\xC1VEL"})})}),e(o,{xs:24,xl:8,children:e(l.Item,{rules:[{required:!0,message:"A quantidade reservada \xE9 obrigat\xF3ria"}],name:"reservedQuantity",label:"Quantidade Reservada:",children:e(J,{placeholder:"ex: 10",size:"large",min:1,max:1e3,style:{width:"100%"}})})}),i(o,{xs:24,xl:16,children:[" ",e(l.Item,{rules:[{required:!0,message:"O Respons\xE1vel \xE9 obrigat\xF3rio"}],name:["employeeResponsible","id"],label:"Colaborador Respons\xE1vel:",children:e(g,{size:"large",showSearch:!0,placeholder:"Selecione o Colaborador respons\xE1vel",optionFilterProp:"children",filterOption:(s,a)=>{var r;return((r=a==null?void 0:a.label)!=null?r:"").toLowerCase().includes(s.toLowerCase())},options:p((F=d==null?void 0:d._embedded)==null?void 0:F.users)})})]}),e(o,{xs:24,xl:12,children:e(l.Item,{name:["supply","id"],label:"Recurso:",rules:[{required:!0,message:"O recurso \xE9 obrigat\xF3rio"}],children:e(g,{size:"large",showSearch:!0,placeholder:"Selecione o Recurso",optionFilterProp:"children",filterOption:(s,a)=>{var r;return((r=a==null?void 0:a.label)!=null?r:"").toLowerCase().includes(s.toLowerCase())},options:p((M=x==null?void 0:x._embedded)==null?void 0:M.supplies)})})}),e(o,{xs:24,xl:12,children:e(l.Item,{rules:[{required:!0,message:"A Esta\xE7\xE3o de Trabalho \xE9 obrigat\xF3ria"}],name:["workStation","id"],label:"Esta\xE7\xE3o de Trabalho*",children:e(g,{size:"large",showSearch:!0,placeholder:"Selecione a Esta\xE7\xE3o de Trabalho",optionFilterProp:"children",filterOption:(s,a)=>{var r;return((r=a==null?void 0:a.label)!=null?r:"").toLowerCase().includes(s.toLowerCase())},options:p((O=m==null?void 0:m._embedded)==null?void 0:O.workStations)})})})]})]}),i(o,{xs:24,lg:12,children:[e(w,{orientation:"left",children:"NOTIFICA\xC7\xC3O"}),i(b,{justify:"space-between",gutter:30,children:[e(o,{xs:24,children:e(l.Item,{name:["notification","title"],label:"T\xEDtulo:",rules:[{required:!0,message:"O T\xEDtulo \xE9 obrigat\xF3rio"}],children:e(I,{placeholder:"ex: Revestimento do Bloco B",size:"large"})})}),e(o,{xs:24,children:e(l.Item,{name:["notification","goal"],label:"Objetivo:",rules:[{required:!0,message:"O objetivo \xE9 obrigat\xF3rio"}],children:e(I,{placeholder:"ex: Regulariza\xE7\xE3o de paredes conclu\xEDdas",size:"large"})})}),e(o,{xs:24,children:e(l.Item,{name:["notification","reason"],label:"Raz\xE3o:",rules:[{required:!0,message:"A raz\xE3o \xE9 orbigat\xF3ria"}],children:e(V,{rows:4,maxLength:300,placeholder:"e.g.: O Revestimento deve ser executado, pois precisamos executar o gesso e as paredes. Sem o revestimento, tais servi\xE7os n\xE3o podem ser executados!",size:"large",showCount:!0})})})]})]})]}),e(_,{loading:A,icon:{create:t.supplyMovement?e(Q,{}):e($,{}),cancel:e(G,{})},label:{save:t.supplyMovement?"EDITAR":"CRIAR",cancel:"CANCELAR"},link:{cancel:"/movimento-recursos"}})]})})}export{te as S};
