import{u as g,r as u,b as v,j as p,ad as h,n as d}from"./index.02d7c6f9.js";import{u as A}from"./useAccessProfiles.099dddd5.js";import{u as G,a as b}from"./usePermissions.6e409d5b.js";import{G as O}from"./GrantForm.09a798fa.js";import"./isAuthenticated.9fb6dc16.js";import"./index.d0d82724.js";import"./StopOutlined.b94033b4.js";function j(){var m;g("Revoga\xE7\xE3o de Permiss\xF5es");const[f,l]=u.exports.useState(!1),{fetchRoles:a,roles:t}=A(),{permissionsNotOrGranted:r,fetchPermissionsAllNotOrGranted:i}=G(),{revokingPermissions:n}=b(),x=v();if(u.exports.useEffect(()=>{a().catch(e=>{var s;if(((s=e==null?void 0:e.data)==null?void 0:s.status)===403){l(!0);return}throw e})},[a,i,n]),f)return p(h,{children:"Voc\xEA n\xE3o tem permiss\xE3o para executar essa opera\xE7\xE3o!"});const E=function(e){i(e,"granted")},c=[];(m=r==null?void 0:r._embedded)==null||m.permissions.map(e=>c.push({label:e.description.toUpperCase(),value:e.id}));function P(){var s;const e=[];return(s=t==null?void 0:t._embedded)==null||s.roles.map(o=>{e.push({label:o.name,value:o.id})}),e}async function N(e,s,o){if(isNaN(Number(e))||isNaN(Number(s)))return d.error({message:"Informe o perfil de acesso ou a permiss\xE3o para a revoga\xE7\xE3o"});await n(e,s).then(R=>{d.success({message:"Sucesso",description:`Permiss\xE3o ${o} revogada com sucesso`}),x("/perfis-de-acesso")})}return p(O,{title:"Revoga\xE7\xE3o de Permiss\xF5es",isNotGranted:!1,optionsAllNotOrGranted:c,optionsRoleOrUser:P(),onPermissionsNotOrGranted:E,onGrantingPermissions:N,profile:"REVOKE_PERMISSIONS"})}export{j as default};
