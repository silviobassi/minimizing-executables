import{r as u,j as a,M as Z,N as y,ai as ci,at as K,cw as li,b as ei,a as ti,e as di,ad as oi,c as r,P as O,S as b,B as c,an as ni,ao as ui,ap as hi,aq as t,R as pi,cp as M,bK as n,T as e,E as W,ar as S,n as C,as as G,am as J,bg as X,bp as fi,u as xi}from"./index.02d7c6f9.js";import{u as Ei}from"./useSuppliesMovement.a31d4505.js";import{F as D}from"./index.d0d82724.js";import{I as bi}from"./index.06ccc6ec.js";var Ci={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M872 474H152c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h720c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8z"}}]},name:"minus",theme:"outlined"};const gi=Ci;var v=function(p,d){return a(Z,{...y(y({},p),{},{ref:d,icon:gi})})};v.displayName="MinusOutlined";const Y=u.exports.forwardRef(v);var Si={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M793 242H366v-74c0-6.7-7.7-10.4-12.9-6.3l-142 112a8 8 0 000 12.6l142 112c5.2 4.1 12.9.4 12.9-6.3v-74h415v470H175c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h618c35.3 0 64-28.7 64-64V306c0-35.3-28.7-64-64-64z"}}]},name:"rollback",theme:"outlined"};const Di=Si;var m=function(p,d){return a(Z,{...y(y({},p),{},{ref:d,icon:Di})})};m.displayName="RollbackOutlined";const k=u.exports.forwardRef(m);function yi(){const h=ci(),p=K(f=>f.suppliesMovements.list),d=K(f=>f.suppliesMovements.fetching);return{fetchSuppliesMovements:u.exports.useCallback(async f=>h(li(f)).unwrap(),[]),suppliesMovements:p,fetching:d}}function Oi(){var V,$;const h=ei(),[p]=D.useForm(),[d,I]=u.exports.useState(0),[f,g]=u.exports.useState(!1),[x,w]=u.exports.useState(),[ii,ai]=u.exports.useState(!1),{suppliesMovements:E,fetchSuppliesMovements:R,fetching:si}=yi();ti();const{xs:T}=di(),{removeSupplyMovement:z,vacateSupplyMovement:N,giveBackSupplyMovement:ri,endSupply:A}=Ei();return u.exports.useEffect(()=>{R({page:d,size:4,sort:["asc"]}).catch(i=>{var s;if(((s=i==null?void 0:i.data)==null?void 0:s.status)===403){ai(!0);return}throw i})},[R,d]),ii?a(oi,{children:"Voc\xEA n\xE3o pode visualizar esses dados!"}):r(O,{children:[a(b,{style:{width:"100%"},direction:T?"vertical":"horizontal",size:"middle",children:a(c,{style:T?{width:"100%"}:{display:"flex"},type:"primary",size:"large",onClick:()=>h("/movimento-recursos/criar"),children:"CRIAR MOVIMENTO DE RECURSO"})}),a(ni,{}),r(ui,{title:"MOVIMENTO DE RECURSOS",children:[a(hi,{loading:si,dataSource:(V=E==null?void 0:E._embedded)==null?void 0:V.suppliesMovements,columns:[{title:"Recursos",responsive:["xs"],render(i){var s,l,U,B,F,L,Q,q,P,j,_,H;return a(b,{direction:"vertical",children:r(t,{column:1,size:"small",children:[a(t.Item,{label:"Nome",children:r(pi,{children:[" ",(s=i==null?void 0:i.supply)==null?void 0:s.name]})}),a(t.Item,{label:"Esta\xE7\xE3o",children:(l=i==null?void 0:i.workStation)==null?void 0:l.localization}),a(t.Item,{label:"Setor",children:(B=(U=i==null?void 0:i.workStation)==null?void 0:U.sector)==null?void 0:B.name}),r(t.Item,{label:"Qtd Unit\xE1ria",children:[(L=(F=i==null?void 0:i.supply)==null?void 0:F.supplyDescription)==null?void 0:L.quantity," ","UNIDADE(s)"]}),r(t.Item,{label:"Qtd Alocada",children:[i==null?void 0:i.allocatedQuantity," ",(q=(Q=i==null?void 0:i.supply)==null?void 0:Q.supplyDescription)==null?void 0:q.measureUnitType]}),r(t.Item,{label:"Total",children:[(j=(P=i==null?void 0:i.supply)==null?void 0:P.supplyDescription)==null?void 0:j.total," ",(H=(_=i==null?void 0:i.supply)==null?void 0:_.supplyDescription)==null?void 0:H.measureUnitType]}),a(t.Item,{children:r(b,{children:[" ",a(M,{onChange:async()=>{await N(i==null?void 0:i.id)},checked:i==null?void 0:i.notBusy,children:i!=null&&i.notBusy?a(n,{color:"blue",children:"DESOCUPADO"}):a(n,{color:"red",children:"OCUPADO"})}),i!=null&&i.movable?a(n,{color:"blue",children:"MOVIMENT\xC1VEL"}):a(n,{color:"red",children:"IMOVIMENT\xC1VEL"})]})}),r(t.Item,{label:"A\xE7\xF5es",children:[a(e,{title:"Editar",children:a(c,{type:"link",icon:a(W,{}),onClick:()=>h(`/movimento-recursos/editar/${i==null?void 0:i.id}`)})}),a(S,{popConfirmTitle:"Remover Movimento?",popConfirmContent:"Deseja mesmo remover este movimento?",onConfirm:async()=>{var o;await z(Number(i==null?void 0:i.id)),C.success({message:"Sucesso",description:`Movimento do recurso ${(o=i==null?void 0:i.supply)==null?void 0:o.name}  removido com sucesso`})},children:a(e,{title:"Excluir",placement:"bottom",children:a(c,{type:"link",children:a(G,{})})})}),a(e,{title:"Devolver",children:a(c,{type:"link",onClick:()=>{var o;w({...i,id:i==null?void 0:i.id,supplyName:(o=i==null?void 0:i.supply)==null?void 0:o.name}),g(!0)},icon:a(k,{})})}),a(S,{popConfirmTitle:"Utilizou o recurso alocado?",popConfirmContent:"Tem certeza que o recurso alocado foi utilizado?",onConfirm:async()=>{var o;await A(Number(i==null?void 0:i.id)),C.success({message:"Sucesso",description:`Quantidade do recurso: ${(o=i==null?void 0:i.supply)==null?void 0:o.name} utilizada, deduzida com sucesso`})},children:a(e,{title:"Finalizar Recurso Alocado",placement:"bottom",children:a(c,{type:"link",children:a(Y,{})})})}),a(e,{title:"Ver Detalhes",children:a(J,{to:`/movimento-recursos/detalhes/${i==null?void 0:i.id}`,children:a(c,{type:"link",icon:a(X,{})})})})]})]})})}},{title:"ID",dataIndex:"id",width:60,responsive:["sm"]},{title:"Nome do Recurso",dataIndex:["supply","name"],width:300,responsive:["sm"]},{title:"Esta\xE7\xE3o de Trabalho",dataIndex:["workStation","name"],width:300,responsive:["sm"]},{title:"Setor",dataIndex:["workStation","sector","name"],width:300,responsive:["sm"]},{title:"QTD Dispon\xEDvel",dataIndex:["supply","supplyDescription","quantity"],width:120,responsive:["sm"]},{title:"QTD Alocada",dataIndex:"allocatedQuantity",width:120,responsive:["sm"]},{title:"Desocupado?",dataIndex:"notBusy",align:"center",responsive:["sm"],render(i,s){return r(O,{children:[" ",a(M,{onChange:async()=>{await N(s==null?void 0:s.id)},checked:s==null?void 0:s.notBusy,children:s!=null&&s.notBusy?a(n,{color:"blue",children:"DESOCUPADO"}):a(n,{color:"red",children:"OCUPADO"})})]})}},{title:"Moviment\xE1vel?",dataIndex:"movable",align:"center",responsive:["sm"],render(i){return a(O,{children:i?a(n,{color:"blue",children:"MOVIMENT\xC1VEL"}):a(n,{color:"red",children:"IMOVIMENT\xC1VEL"})})}},{title:"A\xE7\xF5es",dataIndex:"id",width:200,responsive:["sm"],render:(i,s)=>r(b,{size:"small",children:[a(e,{title:"Editar",children:a(c,{type:"link",icon:a(W,{}),onClick:()=>h(`/movimento-recursos/editar/${s==null?void 0:s.id}`)})}),a(S,{popConfirmTitle:"Remover Movimento?",popConfirmContent:"Deseja mesmo remover este movimento?",onConfirm:async()=>{var l;await z(Number(s==null?void 0:s.id)),C.success({message:"Sucesso",description:`Movimento do recurso ${(l=s==null?void 0:s.supply)==null?void 0:l.name}  removido com sucesso`})},children:a(e,{title:"Excluir",placement:"bottom",children:a(c,{type:"link",children:a(G,{})})})}),a(e,{title:"Devolver",children:a(c,{type:"link",onClick:()=>{var l;w({...x,id:s==null?void 0:s.id,supplyName:(l=s==null?void 0:s.supply)==null?void 0:l.name}),g(!0)},icon:a(k,{})})}),a(S,{popConfirmTitle:"Utilizou o recurso alocado?",popConfirmContent:"Tem certeza que o recurso alocado foi utilizado?",onConfirm:async()=>{var l;await A(Number(s==null?void 0:s.id)),C.success({message:"Sucesso",description:`Quantidade do recurso: ${(l=s==null?void 0:s.supply)==null?void 0:l.name} utilizada, deduzida com sucesso`})},children:a(e,{title:"Finalizar Recurso Alocado",placement:"bottom",children:a(c,{type:"link",children:a(Y,{})})})}),a(e,{title:"Ver Detalhes",children:a(J,{to:`/movimento-recursos/detalhes/${s==null?void 0:s.id}`,children:a(c,{type:"link",icon:a(X,{})})})})]})}],pagination:{onChange:i=>I(i-1),total:($=E==null?void 0:E.page)==null?void 0:$.totalElements,pageSize:4},rowKey:"id"}),a(fi,{title:"Devolu\xE7\xE3o de Recursos",open:f,footer:null,onCancel:()=>g(!1),children:r(D,{layout:"vertical",autoComplete:"off",form:p,onFinish:async i=>{await ri(x==null?void 0:x.id,i),C.success({message:"Sucesso",description:`Recurso ${x==null?void 0:x.supplyName}  devolvido com sucesso`})},children:[a(D.Item,{label:"Quantidade a devolver",name:"reservedQuantity",rules:[{required:!0,message:"A quantidade a devolver \xE9 obrigat\xF3ria"}],children:a(bi,{min:1,style:{width:"100%"}})}),a(D.Item,{style:{marginTop:40},children:r(b,{direction:"horizontal",children:[a(c,{type:"primary",htmlType:"submit",icon:a(k,{}),children:"DEVOLVER"}),a(c,{danger:!0,onClick:()=>g(!1),children:"CANCELAR"})]})})]})})]})]})}function Ti(){return xi("Lista de Movimento de Recursos"),a(Oi,{})}export{Ti as default};
