import{D as b,l as p}from"./pt_BR.91dd4312.js";import{a as T,r as u,b as I,j as e,ao as S,c as x,cD as C,n as v,R as E,C as l,I as o,bJ as D,an as A,cq as w,E as q}from"./index.02d7c6f9.js";import{u as y}from"./useWorkStations.313dde62.js";import{B as j}from"./ButtonForm.54d1a658.js";import{F as r}from"./index.d0d82724.js";import{S as L}from"./SaveOutlined.f4c4007c.js";import{S as R}from"./StopOutlined.b94033b4.js";function $(s){const[m]=r.useForm(),h="DD/MM/YYYY",{fetchWorkStations:g,workStations:n}=y();T();const[O,c]=u.exports.useState(),F=I(),z=u.exports.useCallback(()=>f(),[f]);function f(){var t;const a=[];return(t=n==null?void 0:n._embedded)==null||t.workStations.map(i=>{a.push({label:`${i.name} - ${i.localization}`,value:i.id})}),a}return u.exports.useEffect(()=>{g({})},[g]),e(S,{title:s.title,children:x(r,{layout:"vertical",form:m,initialValues:s.assignment,onFinish:async a=>{var i;const t={...a,nature:(i=a.nature)==null?void 0:i.toUpperCase(),startDate:a.startDate?new Date(a.startDate).toISOString():"",deadline:a.deadline?new Date(a.deadline).toISOString():""};if(c(!0),s.assignment)return s.onUpdate&&s.onUpdate(t).finally(()=>{c(!1)});await C.createAssignment(t).then(d=>{v.success({message:"Sucesso",description:`Tarefa ${d==null?void 0:d.title}  criada com sucesso`}),F("/tarefas")}).finally(()=>{c(!1),m.resetFields()})},children:[x(E,{justify:"space-between",gutter:30,children:[e(l,{xs:24,xl:8,children:e(r.Item,{label:"T\xEDtulo",name:"title",rules:[{required:!0,message:"O T\xEDtulo \xE9 obrigat\xF3rio"}],children:e(o,{size:"large",placeholder:"ex: T\xEDtulo"})})}),e(l,{xs:24,xl:8,children:e(r.Item,{label:"Ponto Espec\xEDfico",name:"specificPoint",rules:[{required:!0,message:"O ponto espec\xEDfico \xE9 obrigat\xF3rio"}],children:e(o,{size:"large",placeholder:"e.g: Banheiro 01"})})}),e(l,{xs:24,xl:8,children:e(r.Item,{label:"Esta\xE7\xE3o de Trabalho",name:["workStation","id"],rules:[{required:!0,message:"A Esta\xE7\xE3o de Trabalho \xE9 obrigat\xF3ria"}],children:e(D,{size:"large",showSearch:!0,placeholder:"Selecione a Esta\xE7\xE3o de Trabalho",optionFilterProp:"children",filterOption:(a,t)=>{var i;return((i=t==null?void 0:t.label)!=null?i:"").toLowerCase().includes(a.toLowerCase())},options:z()})})}),e(l,{xs:24,xl:8,children:e(r.Item,{label:"Tipo da Tarefa",name:"nature",rules:[{required:!0,message:"O tipo da tarefa \xE9 obrigat\xF3rio"},{type:"enum",enum:["Limpeza","Obras"],message:"A unidade de medida precisa ser: Limpeza ou Obras"}],children:e(D,{size:"large",placeholder:"Selecione o Tipo da Tarefa",options:[{label:"Obras",value:"Obras"},{label:"Limpeza",value:"Limpeza"}]})})}),e(l,{xs:24,xl:8,children:e(r.Item,{label:"Data de In\xEDcio",name:"startDate",rules:[{required:!0,message:"A data de in in\xEDcio \xE9 obrigat\xF3ria"}],children:e(b,{style:{width:"100%"},locale:p,format:h,size:"large"})})}),e(l,{xs:24,xl:8,children:e(r.Item,{label:"Prazo para Conclus\xE3o",name:"deadline",rules:[{required:!0,message:"O prazo para a conclus\xE3o \xE9 obrigat\xF3rio"}],children:e(b,{style:{width:"100%"},locale:p,format:h,size:"large"})})})]}),e(A,{orientation:"left",children:"NOTIFICA\xC7\xC3O"}),x(E,{justify:"space-between",gutter:30,children:[e(l,{xs:24,lg:12,children:e(r.Item,{label:"T\xEDtulo",name:["notification","title"],rules:[{required:!0,message:"O t\xEDtulo \xE9 obrigat\xF3rio"}],children:e(o,{size:"large",placeholder:"e.g: T\xEDtulo"})})}),e(l,{xs:24,lg:12,children:e(r.Item,{label:"Objetivo",name:["notification","goal"],rules:[{required:!0,message:"O objetivo \xE9 obrigat\xF3rio"}],children:e(o,{size:"large",placeholder:"e.g: Objetivo"})})}),e(l,{xs:24,children:e(r.Item,{label:"Raz\xE3o",name:["notification","reason"],rules:[{required:!0,message:"A raz\xE3o \xE9 obrigat\xF3ria"}],children:e(w,{rows:4,maxLength:300,size:"large",placeholder:"e.g: Raz\xE3o",showCount:!0})})})]}),e(j,{loading:O,icon:{create:s.assignment?e(q,{}):e(L,{}),cancel:e(R,{})},label:{save:s.assignment?"EDITAR":"CRIAR",cancel:"CANCELAR"},link:{cancel:"/tarefas"}})]})})}export{$ as T};
