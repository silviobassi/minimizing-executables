import{r as c,a as H,b as V,e as Y,j as e,ad as W,c as o,P as m,S,al as _,B as r,an as K,ao as q,I as x,ap as G,aq as i,R as J,C as u,bH as T,bI as U,bK as p,T as s,am as h,E as R,ar as k,n as N,as as B,bg as F,af as Q,bM as X,u as Z}from"./index.02d7c6f9.js";import{h as ee}from"./moment.9709ab41.js";import{u as te}from"./useUser.6cf66133.js";import{u as ae}from"./useUsers.609874be.js";import{c as O,p as z}from"./generateFormatterData.22098d6b.js";import{f as oe}from"./index.d7c688b0.js";function ie(){var A,I;const{users:n,fetchUsers:f,fetching:P}=ae(),[b,L]=c.exports.useState(0),[$,j]=c.exports.useState(!1),{removeUser:g}=te();H();const[v,y]=c.exports.useState(""),[E,w]=c.exports.useState(""),M=V(),{xs:C}=Y();if(c.exports.useEffect(()=>{f({page:b,size:4,sort:["asc"],userCpf:v,userName:E}).catch(t=>{var a;if(((a=t==null?void 0:t.data)==null?void 0:a.status)===403){j(!0);return}throw t})},[f,b,v,E]),$)return e(W,{children:"Voc\xEA n\xE3o pode visualizar esses dados!"});const D=(t,a)=>({filterDropdown:({})=>e(Q,{children:e(x,{type:"text",placeholder:`Buscar ${a||t}`,onChange:l=>{let d=l.target.value;if(t==="cpf"){y(d);return}w(d)}})}),filterIcon:l=>e(X,{style:{color:l?"#0099ff":void 0}})});return o(m,{children:[o(S,{style:{width:"100%"},direction:C?"vertical":"horizontal",size:"middle",children:[e(_,{onReload:f}),e(r,{style:C?{width:"100%"}:{display:"flex"},type:"primary",size:"large",onClick:()=>M("/colaborador/criar"),children:"CRIAR COLABORADORES"})]}),e(K,{}),o(q,{title:"Lista de Colaboradores",children:[C&&o(m,{children:[e(x,{onChange:t=>w(t.target.value),placeholder:"Buscar por Nome",type:"text",style:{width:"100%",marginBottom:10,marginTop:20}}),e(x,{onChange:t=>y(t.target.value),placeholder:"Buscar por CPF",type:"text",style:{width:"100%",marginBottom:30,marginTop:20}})]}),e(G,{loading:P,dataSource:(A=n==null?void 0:n._embedded)==null?void 0:A.users,rowKey:"id",columns:[{title:"Colaboradores",responsive:["xs"],render(t){var a;return e(S,{direction:"vertical",children:o(i,{column:1,size:"small",children:[o(J,{justify:"space-between",children:[o(u,{xs:5,style:{marginRight:10},children:[" ",e(i.Item,{children:e(T,{size:45,src:t==null?void 0:t.avatarUrl,icon:e(U,{})})})]}),o(u,{xs:19,children:[" ",e(i.Item,{children:t==null?void 0:t.name})]})]}),e(i.Item,{label:"CPF:",children:O(t==null?void 0:t.cpf)}),e(i.Item,{label:"WhatsApp:",children:z(t==null?void 0:t.whatsApp)}),e(i.Item,{label:"Cadastrado em:",children:ee(t==null?void 0:t.createdAt).format("DD/MM/YYYY HH:ss")}),e(i.Item,{label:"N\xEDvel de Acesso:",children:t!=null&&t.role?e(p,{color:"blue",children:(a=t==null?void 0:t.role)==null?void 0:a.name.toUpperCase()}):e(p,{color:"red",children:"SEM ACESSO"})}),e(i.Item,{label:"A\xE7\xF5es",children:o(m,{children:[e(s,{title:"Editar",children:e(h,{to:`/colaborador/editar/${t.id}`,children:e(r,{type:"link",icon:e(R,{})})})}),e(k,{popConfirmTitle:"Remover Colaborador?",popConfirmContent:"Deseja mesmo remover este colaborador?",onConfirm:async()=>{console.log(t.id),await g(Number(t.id)),N.success({message:"Sucesso",description:`Tarefa ${t.name}  removida com sucesso`})},children:e(s,{title:"Excluir",placement:"bottom",children:e(r,{type:"link",children:e(B,{})})})}),e(s,{title:"Ver Detalhes",children:e(h,{to:`/colaborador/${t.id}/detalhes`,children:e(r,{type:"link",icon:e(F,{})})})})]})})]})})}},{title:"ID",dataIndex:"id",width:60,responsive:["sm"]},{title:"Avatar",dataIndex:"avatarUrl",width:60,responsive:["sm"],render(t){return e(T,{src:t,children:e(U,{})})}},{title:"Nome",dataIndex:"name",width:450,responsive:["sm"],...D("name","Nome")},{title:"CPF",dataIndex:"cpf",width:150,responsive:["sm"],...D("cpf","CPF"),render(t){return O(t)}},{title:"WhatsApp",dataIndex:"whatsApp",width:270,responsive:["sm"],render(t){return z(t)}},{title:"Data da Cria\xE7\xE3o",dataIndex:"createdAt",width:270,responsive:["sm"],render(t){return oe(new Date(t),"dd/MM/yyyy - HH:ss")}},{title:"N\xEDvel de Acesso",dataIndex:"role",width:180,responsive:["sm"],render(t,a){var l,d;return e(m,{children:(l=a==null?void 0:a.role)!=null&&l.name?e(p,{color:"blue",children:(d=a==null?void 0:a.role)==null?void 0:d.name.toUpperCase()}):e(p,{color:"red",children:"sem acesso".toUpperCase()})})}},{title:"A\xE7\xF5es",dataIndex:"id",align:"center",width:300,responsive:["sm"],render:(t,a)=>o(m,{children:[e(s,{title:"Editar",children:e(h,{to:`/colaborador/editar/${a.id}`,children:e(r,{type:"link",icon:e(R,{})})})}),e(k,{popConfirmTitle:"Remover Colaborador?",popConfirmContent:"Deseja mesmo remover este colaborador?",onConfirm:async()=>{console.log(a.id),await g(Number(a.id)),N.success({message:"Sucesso",description:`Tarefa ${a.name}  removida com sucesso`})},children:e(s,{title:"Excluir",placement:"bottom",children:e(r,{type:"link",children:e(B,{})})})}),e(s,{title:"Ver Detalhes",children:e(h,{to:`/colaborador/${a.id}/detalhes`,children:e(r,{type:"link",icon:e(F,{})})})})]})}],pagination:{onChange:t=>L(t-1),total:(I=n==null?void 0:n.page)==null?void 0:I.totalElements,pageSize:4}})]})]})}function me(){return Z("Lista de Colaboradores"),e(ie,{})}export{me as default};
