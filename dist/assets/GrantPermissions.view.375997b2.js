import{u as G,r as u,b as h,j as p,ad as g,n as d}from"./index.02d7c6f9.js";import{u as A}from"./useAccessProfiles.099dddd5.js";import{u as b,a as O}from"./usePermissions.6e409d5b.js";import{G as S}from"./GrantForm.09a798fa.js";import"./isAuthenticated.9fb6dc16.js";import"./index.d0d82724.js";import"./StopOutlined.b94033b4.js";function T(){var m;G("Concess\xE3o de Permiss\xF5es");const[f,l]=u.exports.useState(!1),{fetchRoles:n,roles:t}=A(),{permissionsNotOrGranted:r,fetchPermissionsAllNotOrGranted:i}=b(),{grantingPermissions:a}=O(),x=h();if(u.exports.useEffect(()=>{n().catch(s=>{var e;if(((e=s==null?void 0:s.data)==null?void 0:e.status)===403){l(!0);return}throw s})},[n,i,a]),f)return p(g,{children:"Voc\xEA n\xE3o tem permiss\xE3o para executar essa opera\xE7\xE3o!"});const P=function(s){i(s,"notGranted")},c=[];(m=r==null?void 0:r._embedded)==null||m.permissions.map(s=>c.push({label:s.description.toUpperCase(),value:s.id}));function E(){var e;const s=[];return(e=t==null?void 0:t._embedded)==null||e.roles.map(o=>{s.push({label:o.name,value:o.id})}),s}async function N(s,e,o){if(isNaN(Number(s))||isNaN(Number(e)))return d.error({message:"Informe o perfil de acesso ou a permiss\xE3o para a concess\xE3o"});await a(s,e).then(v=>{d.success({message:"Sucesso",description:`Permiss\xE3o ${o} concedida com sucesso`}),x("/perfis-de-acesso")})}return p(S,{title:"Concess\xE3o de Permiss\xF5es",isNotGranted:!0,optionsAllNotOrGranted:c,optionsRoleOrUser:E(),onPermissionsNotOrGranted:P,onGrantingPermissions:N,profile:"GRANT_PERMISSIONS"})}export{T as default};
